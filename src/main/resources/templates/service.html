<!--<!DOCTYPE html>-->
<!--<html>-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Admin WebSocket Chat</title>-->
<!--    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1.5.0/dist/sockjs.min.js"></script>-->
<!--    <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>-->
<!--    <script>-->
<!--        // var currentRecipient = ''; // 전역 변수로 recipient를 저장-->
<!--        var currentMessageTitle = ''; // 전역 변수로 messageTitle을 저장-->
<!--        let currentRecipient = 'initialValue';-->
<!--        currentRecipient = 'test@test'; // 이제 오류가 발생하지 않음-->

<!--        var stompClient = null;-->

<!--        function connect() {-->
<!--            var socket = new SockJS('/ws');-->
<!--            stompClient = Stomp.over(socket);-->
<!--            stompClient.connect({}, function (frame) {-->
<!--                console.log('Connected: ' + frame);-->

<!--                // 공개 메시지 구독-->
<!--                stompClient.subscribe('/topic/public', function(greeting){-->
<!--                    console.log("Received: " + greeting.body);-->
<!--                    showMessage(JSON.parse(greeting.body).content); // 수신한 메시지를 화면에 표시-->
<!--                });-->

<!--                // 개인 메시지 구독-->
<!--                stompClient.subscribe('/user/queue/private', function(message){-->
<!--                    console.log("Private Message: " + message.body);-->
<!--                    var parsedMessage = JSON.parse(message.body);-->
<!--                    showMessage('유저 - ' + parsedMessage.sender + ': ' + parsedMessage.content); // 수신한 메시지를 화면에 표시-->
<!--                    currentRecipient = parsedMessage.sender; // 예시로 sender를 recipient로 설정-->
<!--                    currentMessageTitle = parsedMessage.messageTitle; // 메시지 제목 받기-->

<!--                });-->

<!--                // 메시지 전송-->
<!--                stompClient.send("/app/message", {}, JSON.stringify({'content': 'Hello, World!'}));-->

<!--                stompClient.subscribe('/topic/messages', function (message) {-->
<!--                    showMessage(JSON.parse(message.body).content);-->
<!--                });-->
<!--            });-->
<!--        }-->

<!--        function sendMessage() {-->
<!--            var messageContent = document.getElementById('message').value; // 입력된 메시지 내용 가져오기-->
<!--            if (messageContent) {-->
<!--                var message = {-->
<!--                    sender: 'admin@admin.com',  // 관리자 이메일-->
<!--                    recipient: currentRecipient,-->
<!--                    content: messageContent,-->
<!--                    messageTitle: currentMessageTitle-->
<!--                };-->
<!--                console.log("Sending message:", message);-->
<!--                stompClient.send("/app/chat/admin", {}, JSON.stringify(message));-->
<!--                showMessage('관리자: ' + messageContent);-->
<!--                document.getElementById('message').value = '';-->
<!--            }-->
<!--        }-->

<!--        function showMessage(message) {-->
<!--            var messages = document.getElementById('messages');-->
<!--            var messageElement = document.createElement('p');-->
<!--            messageElement.appendChild(document.createTextNode(message));-->
<!--            messages.appendChild(messageElement);-->
<!--        }-->

<!--        window.onload = function() {-->
<!--            connect();-->
<!--            fetchMessages();-->
<!--        };-->

<!--        function fetchMessages() {-->
<!--            fetch(`/chat/private/${currentRecipient}`)-->
<!--                .then(response => {-->
<!--                    if (!response.ok) {-->
<!--                        throw new Error('Network response was not ok ' + response.statusText);-->
<!--                    }-->
<!--                    return response.json();-->
<!--                })-->
<!--                .then(data => {-->
<!--                    console.log('Data:', data);-->
<!--                    data.forEach(item => {-->
<!--                        if (Array.isArray(item.messages)) {-->
<!--                            item.messages.forEach(message => {-->
<!--                                let displayMessage = `${message.sender}: ${message.content}`;-->
<!--                                showMessage(displayMessage);-->
<!--                            });-->
<!--                        }-->
<!--                    });-->
<!--                })-->
<!--                .catch(error => console.error('Error fetching messages:', error));-->
<!--        }-->
<!--    </script>-->
<!--</head>-->
<!--<body>-->

<!--<div id="messages"></div>-->
<!--<div>-->
<!--    <input type="text" id="message" placeholder="Type a message..."/>-->
<!--    <button onclick="sendMessage()">Send</button>-->
<!--</div>-->

<!--</body>-->
<!--</html>-->