<!DOCTYPE HTML>
<!--
	Helios by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html lang="en"
	  layout:decorate="~{layout/layout_total}"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  xmlns:th="http://www.thymeleaf.org">
<head>
	<title>Cinemacast</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

	<meta property="og:title" content="${event.eventName}">
	<meta property="og:description" content="${event.eventDetail}">
	<meta property="og:url" content="http://localhost:8080/event_get/${eventId}">
	<meta property="og:image" content="http://localhost:8080/images/event/${event.eventImage}">


	<link href="/assets/css/main.css" rel="stylesheet"/>
	<link href="/assets/css/custom.css" rel="stylesheet"/>
	<link href="/assets/css/nav.css" rel="stylesheet"/>
	<noscript>
		<link href="/assets/css/noscript.css" rel="stylesheet"/>
	</noscript>
	<script src="https://developers.kakao.com/sdk/js/kakao.js"></script>

	<style>
		.container {
			text-align: center; /* 부모 요소의 텍스트 및 인라인 블록 요소들을 중앙 정렬 */
		}

		.btn_box {
			display: flex;
			justify-content: center; /* 플렉스 컨테이너 내의 아이템들을 중앙 정렬 */
			gap: 10px; /* 버튼들 사이의 간격 조정 */
			margin-top: 20px; /* 위쪽에 약간의 여백 추가 */
		}

		.btn_box button, .btn_box .kakao_btn {
			margin: 0 5px; /* 버튼들 사이의 여백 추가 */
		}

		#input-file {
			display: block; /* 이미지를 블록 요소로 변환 */
			margin: 0 auto; /* 자동 여백을 사용하여 중앙 정렬 */
		}
	</style>
</head>
<body class="no-sidebar is-preload">
<th:block layout:fragment="content">
	<div id="page-wrapper">
		<header data-include-path="header.html"></header>

		<!-- Main -->

		<div class="wrapper style1">
			<div class="container">
				<article id="main" class="special">
					<header>
						<h2 th:text="${event.eventName}">이벤트 제목</h2>
<!--						<p th:text="${event.regDate}">이벤트 등록 날짜</p>-->
					</header>
					<section>
						<img id="input-file" th:src="@{'/images/event/' + ${event.eventImage}}" alt="이벤트 이미지" style="width: 1000px; height: auto;"/>
<!--						<p class="event-detail" th:text="${event.eventDetail}">-->
<!--							이벤트 상세 내용-->
<!--						</p>-->
					</section>
					<table class="default">
						<tr>
							<td>다음글</td>
							<td th:if="${nextEvent != null}">
								<a th:href="@{/event_get/{id}(id=${nextEvent.id})}" th:text="${nextEvent.eventName}"></a>
							</td>
							<td th:if="${nextEvent == null}">다음글이 없습니다.</td>
						</tr>
						<tr>
							<td>이전글</td>
							<td th:if="${previousEvent != null}">
								<a th:href="@{/event_get/{id}(id=${previousEvent.id})}" th:text="${previousEvent.eventName}"></a>
							</td>
							<td th:if="${previousEvent == null}">이전글이 없습니다.</td>
						</tr>
					</table>
					<div class="btn_box">
						<a href="javascript:shareMessage()">
							<button class="button" onclick="window.location.href='/event/eventList'">목록</button>
							<button type="button" class="kakao_btn">
								<img src="/img/front/icon/kakao_sh.png" alt="카카오톡 공유">
							</button>
						</a>
					</div>
				</article>
			</div>
		</div>

		<footer data-include-path="footer.html"></footer>

	</div>


	<script>
		// include.js
		window.addEventListener('load', function() {
			var allElements = document.getElementsByTagName('*');
			Array.prototype.forEach.call(allElements, function (el) {
				var includePath = el.dataset.includePath;
				if (includePath) {
					var xhttp = new XMLHttpRequest();
					xhttp.onreadystatechange = function () {
						if (this.readyState == 4 && this.status == 200) {
							el.outerHTML = this.responseText;
						}
					};
					xhttp.open('GET', includePath, true);
					xhttp.send();
				}
			});

			// Kakao SDK 초기화
			Kakao.init('3d074cbbda365535b831c90baead22c2'); // 여기에 실제 Kakao 앱 키를 입력하세요.
		});

		// Kakao 공유 함수
		function shareMessage() {
			var currentUrl = window.location.href;
			var urlSegments = currentUrl.split('/');
			var eventId = urlSegments[urlSegments.length - 1];

			var titleElement = document.querySelector('h2');
			var detailElement = document.querySelector('.event-detail');
			var imageElement = document.querySelector('img');

			if (titleElement && detailElement && imageElement) {
				var title = titleElement.innerText;
				var detail = detailElement.innerText;
				var imageUrl = imageElement.src;

				Kakao.Link.sendDefault({
					objectType: 'feed',
					content: {
						title: title, // 이벤트 제목
						description: detail, // 이벤트 상세 내용
						imageUrl: imageUrl, // 이벤트 이미지 URL
						link: {
							mobileWebUrl: `http://localhost:8080/event_get/${eventId}`, // 동적 이벤트 ID를 포함한 URL
							webUrl: `http://localhost:8080/event_get/${eventId}`
						}
					}
				});
			} else {
				console.error('필요한 요소를 찾을 수 없습니다.');
			}
		}
	</script>
</th:block>
</body>
</html>