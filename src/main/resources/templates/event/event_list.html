<!DOCTYPE HTML>
<!--
	Helios by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html lang="en" layout:decorate="~{layout/layout_total}"
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
xmlns:th="http://www.thymeleaf.org">
	<head>
		<title>Cinemacast</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="/assets/css/main.css" />
		<link rel="stylesheet" href="/assets/css/custom.css" />
		<link rel="stylesheet" href="/assets/css/nav.css" />
		<noscript><link rel="stylesheet" href="/assets/css/noscript.css" /></noscript>
	</head>
	<body class="no-sidebar is-preload">
	<th:block layout:fragment="content">
		<div id="page-wrapper">

			<!-- Header -->
			<header data-include-path="header.html"></header>

			<!-- Main movie_list 한 페이지에 16개 정도되게 해주세요 -->
				<div class="wrapper style1 movie_list list">

					<div class="container">
						<article id="main" class="special">
							<header>
								<h2><a href="#">이벤트</a></h2>
								<p>
									Morbi convallis lectus malesuada sed fermentum dolore amet
								</p>
							</header>
						</article>
						<hr/>
						<div class="row">
							<article class="col-3 col-12-mobile special" th:each="event : ${eventList}">
								<input type="hidden" th:value="${event.id}" />
								<a th:href="@{'/event_get/' + ${event.id}}" class="image featured">
									<img th:src="@{'/images/event/' + ${event.event_image}}" alt="이벤트 이미지" style="width: 100px; height: auto;"/>

								</a>
								<header>
									<h3>
										<a th:href="@{'/event_get/' + ${event.id}}" th:text="${event.event_name}"></a>
									</h3>
								</header>
								<p>
									<!-- 여기에 추가적인 설명이나 내용을 넣을 수 있습니다. 필요하지 않다면 비워둡니다. -->
								</p>
							</article>
						</div>
						<div style="text-align: center" th:unless="${eventList.totalElements > 0}">
							<h3>상품을 준비중 입니다.</h3>
						</div>
					</div>
					<div style="text-align: center;">
						<a th:href="@{'/event/eventList?page=' + ${i}}" th:each="i : ${#numbers.sequence(startPage, endPage)}" class="paging-btn" th:text="'[' + ${i} + ']'"></a>
					</div>
				</div>

			<footer data-include-path="footer.html"></footer>

		<!-- Scripts -->
			<script src="/assets/js/jquery.min.js"></script>
			<script src="/assets/js/jquery.dropotron.min.js"></script>
			<script src="/assets/js/jquery.scrolly.min.js"></script>
			<script src="/assets/js/jquery.scrollex.min.js"></script>
			<script src="/assets/js/browser.min.js"></script>
			<script src="/assets/js/breakpoints.min.js"></script>
			<script src="/assets/js/util.js"></script>
			<script src="/assets/js/main.js"></script>
		</div>
	</th:block>

		<script>

			// include.js
			window.addEventListener('load', function() {
				var allElements = document.getElementsByTagName('*');
				Array.prototype.forEach.call(allElements, function(el) {
					var includePath = el.dataset.includePath;
					if (includePath) {
						var xhttp = new XMLHttpRequest();
						xhttp.onreadystatechange = function () {
							if (this.readyState == 4 && this.status == 200) {
								el.outerHTML = this.responseText;
							}
						};
						xhttp.open('GET', includePath, true);
						xhttp.send();
					}
				});
			}); // 이 부분을 추가하여 괄호를 닫습니다.


			$(document).ready(function() {
				function loadPage(page) {
					$.ajax({
						url: '/event/eventList?page=' + page,
						type: 'GET',
						success: function(response) {
							$('#page-wrapper').html(response);
						},
						error: function(error) {
							alert("Failed to load the page. Please try again.");
						}
					});
				}

				$(document).on('click', '.paging-btn', function(e) {
					e.preventDefault();
					var page = $(this).data('page');
					loadPage(page);
				});
			});
		</script>
	</body>
</html>